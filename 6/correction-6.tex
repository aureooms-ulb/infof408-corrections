\documentclass{article}
\errorcontextlines 10000

\makeatletter

\usepackage{fontspec}
\usepackage{xunicode}
\usepackage{xltxtra}

\usepackage{fullpage}
\usepackage{mleftright}
\usepackage{hhline}

\usepackage{hyperref}

\hypersetup{%
	linktocpage  = true, %page number is the link (not title)
	colorlinks   = true, %Colours links instead of ugly boxes
	urlcolor     = darkblue, %Colour for external hyperlinks
	linkcolor    = darkblue, %Colour of internal links
	citecolor    = darkblue   %Colour of citations
}

%\hypersetup{
%	linktocpage  = true, %page number is the link (not title)
%	colorlinks   = true, %Colours links instead of ugly boxes
%	allcolors = bookColor,
%	hidelinks = true
%}

% good looking urls
\urlstyle{same}

\newcommand{\theoremname}{Theorem}
\newcommand{\corollaryname}{Corollary}
\newcommand{\problemname}{Problem}
\newcommand{\conjecturename}{Conjecture}
\newcommand{\definitionname}{Definition}

% we use this for our references as well
\let\sref\ref
\AtBeginDocument{\renewcommand{\ref}[1]{\mbox{\autoref{#1}}}}
\usepackage[nameinlink]{cleveref}

% define colors %
\usepackage[table]{xcolor}

%\usepackage[table,dvipdfx,cmyk]{xcolor}
%\definecolor{bookColor}{cmyk}{0 ,0 ,0 ,1}
%\color{bookColor}

\definecolor{lightgray}{rgb}{0.9,0.9,0.9}
\definecolor{darkgray}{rgb}{0.4,0.4,0.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}
\definecolor{darkblue}{rgb}{0.02, 0.17, 0.40}
\usepackage[stable]{footmisc}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{url}
\usepackage{amsmath,amsthm,amsfonts,mathtools}
\usepackage{xfrac}


\newtheorem{theorem}{\theoremname}
\newtheorem{corollary}{\corollaryname}
\newtheorem{problem}{\problemname}
\newtheorem{conjecture}{\conjecturename}
\newtheorem{definition}{\definitionname}

% nicely spaced operators
\DeclareMathOperator{\Exists}{\exists}
\DeclareMathOperator{\Forall}{\forall}

\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\newcommand{\card}[1]{|#1|}

\newcommand{\st}{\colon\,}
\newcommand{\TM}{TM}
\newcommand{\Atm}{A\textsubscript{TM}}
\newcommand{\HALTtm}{HALT\textsubscript{TM}}

\newcommand{\N}{\mathbb{N}}
\newcommand{\nth}[1]{#1^{\text{th}}}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}



% TURING MACHINE DESCRIPTIONS
\usepackage{changepage}
\newenvironment{steps}%
{%
\vspace{0.25cm}%
\begin{adjustwidth}{0.3cm}{0cm}%
\begin{description}%
}
{%
\end{description}%
\end{adjustwidth}%
\vspace{0.1cm}%
}

\newcounter{TMachine}[section]
\renewcommand{\theTMachine}{\thesection.\arabic{TMachine}}%
\newenvironment{TMachine}[1]
  {\refstepcounter{TMachine}%
   \par%
   \vspace{.5\baselineskip\@plus.2\baselineskip\@minus.2\baselineskip}% Space above
   \noindent{#1}%
   \begin{steps}}%\begin{TMachine}
  {\end{steps}%
\vspace{.5\baselineskip\@plus.2\baselineskip\@minus.2\baselineskip}% Space below
}% \end{TMachine}

\newcommand{\accept}{\emph{accept}}
\newcommand{\reject}{\emph{reject}}

\makeatother

\title{Computability and Complexity:\\Exercise Session 6 (2015-11-9)}
\author{Aur√©lien Ooms\footnote{aureooms@ulb.ac.be}}
\date{\today}

\begin{document}
\maketitle
\tableofcontents

\section{\texorpdfstring{UHAMPATH is NP-complete\footnote{%
Theorem 7.55 from the reference book: Sipser M.,
\emph{Introduction to the Theory of Computation}, 3rd edition
(2013).}}{UHAMPATH is NP-complete}}

Last lecture we showed that
\begin{theorem}
	HAMPATH is NP-complete.
\end{theorem}
We now want to show that the undirected version of HAMPATH is NP-complete too
\begin{definition}
	UHAMPATH \(= \{\langle G, s, t\rangle \st G\) is an undirected
	graph and has an hamiltonian path from vertex \(s\) to vertex
	\(t\}\).
\end{definition}
We prove the following
\begin{theorem}
	UHAMPATH is NP-complete.
\end{theorem}
\begin{proof}
	Clearly, UHAMPATH is in NP\@. For any instance \(\langle G,s,t\rangle\)
	any sequence of vertices that is a
	hamiltonian path from \(s\) to \(t\) in \(G\) can be used as a certificate
	of polynomial size.
	Given an instance \(\langle G, s, t \rangle\) of the HAMPATH problem, we
	build an instance \(\langle G', s^{out}, t^{in}\rangle\) of the UHAMPATH
	problem as follows. Start with an empty undirected graph \(G'\). For the
	vertices \(s\) and \(t\) of \(G\) add the vertices \(s^{out}\) and
	\(t^{in}\) to \(G'\). For each vertex \(v\) other than \(s\) and \(t\) add
	vertices \(v^{in}, v^{mid}\) and \(v^{out}\) to \(G'\). For each triple
	\(v^{in},v^{mid},v^{out}\) of \(G'\) add the undirected edges \(\{v^{in},
	v^{mid}\}\) and \(\{v^{mid},v^{out}\}\) to \(G'\).
	For each directed
	edge \((u,v)\) with \(u \neq t\) and \(v \neq s\) of \(G\) add an
	undirected
	edge \(\{u^{out},v^{in}\}\) to \(G'\).

	Now we prove that \(\langle G, s, t \rangle \in\) HAMPATH if and only if
	\(\langle G', s^{out}, t^{in}\rangle \in\) UHAMPATH\@. A hamiltonian path from \(s\) to
	\(t\) in \(G\) has the following form
	\begin{displaymath}
		s, u_{i_1}, u_{i_2}, \ldots, u_{i_{n-2}}, t
	\end{displaymath}
	which corresponds to the hamiltonian path
	\begin{displaymath}
		s^{out}, u^{in}_{i_1}, u^{mid}_{i_1}, u^{out}_{i_1}, u^{in}_{i_2},
		u^{mid}_{i_2}, u^{out}_{i_2}, \ldots, u^{in}_{i_{n-2}}, u^{mid}_{i_{n-2}},
		u^{out}_{i_{n-2}}, t^{in}
	\end{displaymath}
	in \(G'\). For the other direction of the equivalence we show that a
	hamiltonian path from \(s^{out}\) to \(t^{in}\) in \(G'\) can only have the
	form given above. Such a hamiltonian path must start with \(s^{out}\) and
	since there is no \(s^{mid}\) in \(G'\) we are only able to reach a vertex
	of the type \(u^{in}\). Once in \(u^{in}\) we can only go to \(u^{mid}\).
	This is because the only vertices incident to \(u^{mid}\) are \(u^{in}\) and
	\(u^{out}\). If we do not go to \(u^{mid}\) just after \(u^{in}\),
	the only way to reach \(u^{mid}\) will be through \(u^{out}\) and there
	will be then no way to escape from \(u^{mid}\). Once we are in \(u^{mid}\)
	we continue to \(u^{out}\). We are now in the same configuration as the one
	we started with, except that we removed vertices
	\(s^{out},u^{in},u^{mid}\). To visit all vertices, we must repeat this
	scheme until there is only two vertices left, that is, \(u^{out}_{n-2}\)
	and \(t^{in}\). Note that the complexity of this reduction is linear in the
	size of the input graph \(G\).
\end{proof}
\end{document}
